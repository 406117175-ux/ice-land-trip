<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å†°å³¶è‡ªé§•åŠ©ç† - 13æ—¥å°èˆªç‰ˆ</title>
    <style>
        :root {
            --primary: #003897;
            --accent: #d72828;
            --bg: #f0f2f5;
            --card-itinerary: #e7f3ff; /* æ™¯é»å¡ç‰‡è‰² */
            --card-food: #fff4e6;      /* é¤å»³å¡ç‰‡è‰² */
            --card-hotel: #f3f0ff;     /* ä½å®¿å¡ç‰‡è‰² */
            --text: #1a1a1a;
        }

        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 90px; }
        
        /* å°è¦½åˆ— */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; height: 70px;
            background: white; display: flex; border-top: 1px solid #ddd; z-index: 1000;
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 12px; color: #666; cursor: pointer; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-item span { font-size: 20px; margin-bottom: 2px; }

        /* é é¢åˆ‡æ› */
        .page { display: none; padding: 15px; animation: fadeIn 0.2s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* åœ–å¡æ¨£å¼ */
        .card { background: white; border-radius: 15px; padding: 16px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); position: relative; }
        .card h3 { margin-top: 0; font-size: 18px; margin-bottom: 10px; display: flex; align-items: center; }
        .card-type { font-size: 10px; padding: 2px 8px; border-radius: 10px; margin-left: auto; color: white; text-transform: uppercase; }
        
        .type-itinerary { background: var(--card-itinerary); border-left: 5px solid #1877f2; }
        .type-food { background: var(--card-food); border-left: 5px solid #fd7e14; }
        .type-hotel { background: var(--card-hotel); border-left: 5px solid #7048e8; }
        
        .label-itinerary { background: #1877f2; }
        .label-food { background: #fd7e14; }
        .label-hotel { background: #7048e8; }

        /* æŒ‰éˆ• */
        .btn-nav {
            display: inline-flex; align-items: center; justify-content: center;
            width: 100%; padding: 10px; background: white; border: 1px solid #ddd;
            border-radius: 8px; text-decoration: none; color: #333; font-weight: 500;
            margin-top: 10px; font-size: 14px;
        }
        .btn-nav span { margin-right: 8px; }

        /* å¤©æ•¸é¸æ“‡å™¨ */
        .day-scroller { display: flex; overflow-x: auto; gap: 8px; padding-bottom: 10px; margin-bottom: 10px; }
        .day-btn { padding: 8px 16px; background: white; border: 1px solid #ddd; border-radius: 20px; white-space: nowrap; font-size: 14px; }
        .day-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* å…¨è¢å¹•æ¨¡æ…‹çª— */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; color: white; z-index: 2000; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        .modal-main { font-size: 40px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="home" class="page active">
        <div class="card" style="border: 2px solid var(--accent);">
            <h3>ğŸš¨ è¡Œå‰é˜²å‘†è­¦ç¤º</h3>
            <p>â€¢ 9/27 2026 å‡ºç™¼ï¼šè«‹æª¢æŸ¥è­·ç…§æœ‰æ•ˆæœŸé™ [cite: 39-40]</p>
            <p>â€¢ ç§Ÿè»Šï¼šLOTUS å¯†ç¢¼åˆ¶è‡ªåŠ©å–è»Š [cite: 49]</p>
        </div>
        <div class="card">
            <h3>â˜€ï¸ ç•¶å‰å¤©æ°£èˆ‡åŒ¯ç‡</h3>
            <div id="weather">å®šä½ä¸­...</div>
            <p>1 TWD â‰ˆ 4.35 ISK (é è¨ˆ)</p>
            <a href="https://safetravel.is" class="btn-nav"><span>ğŸŒ</span>æŸ¥çœ‹å†°å³¶å®‰å…¨è·¯æ³ (Road.is)</a>
        </div>
    </div>

    <div id="itinerary" class="page">
        <div class="day-scroller" id="day-bar"></div>
        <div id="cards-container">
            </div>
    </div>

    <div id="comm" class="page">
        <h3>ğŸ‡®ğŸ‡¸ æŒ‡é»å†°å³¶èª (Focus Mode)</h3>
        <div class="card" onclick="openModal('Ã‰g Ã¾arf hjÃ¡lp', 'I need help / æˆ‘éœ€è¦å¹«åŠ©')">ğŸ†˜ æˆ‘éœ€è¦å¹«åŠ© (Help)</div>
        <div class="card" onclick="openModal('Hvar er bensÃ­nstÃ¶Ã°?', 'Where is the gas station? / åŠ æ²¹ç«™åœ¨å“ªï¼Ÿ')">â›½ æ‰¾åŠ æ²¹ç«™ (Gas)</div>
        <div class="card" onclick="openModal('DÃ­sel, takk', 'Diesel, please / è«‹åŠ æŸ´æ²¹')">â›½ è«‹åŠ æŸ´æ²¹ (Diesel)</div>
        <div class="card" onclick="openModal('Vinsamlegast reikninginn', 'The bill, please / çµå¸³')">ğŸ’° çµå¸³ (Bill)</div>
    </div>

    <div id="tools" class="page">
        <div class="card">
            <h3>ğŸ’° å¿«é€Ÿè¨˜å¸³ (LocalStorage)</h3>
            <input type="text" id="exp-name" placeholder="é …ç›®" style="width:60%">
            <input type="number" id="exp-val" placeholder="ISK" style="width:30%">
            <button onclick="addExp()" class="btn-nav">ï¼‹ æ–°å¢ç´€éŒ„</button>
            <div id="exp-list" style="margin-top:10px; font-size:14px;"></div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="navTo('home', this)"><span>ğŸ </span>é¦–é </div>
        <div class="nav-item" onclick="navTo('itinerary', this)"><span>ğŸ“…</span>è¡Œç¨‹</div>
        <div class="nav-item" onclick="navTo('comm', this)"><span>ğŸ—£ï¸</span>æºé€š</div>
        <div class="nav-item" onclick="navTo('tools', this)"><span>ğŸ› ï¸</span>å·¥å…·</div>
    </nav>

    <div id="modal" class="modal" onclick="this.style.display='none'">
        <div class="modal-main" id="modal-txt"></div>
        <div style="margin-top:20px; color:#888;">Tap to close</div>
    </div>

    <script>
        // --- 13æ—¥è©³ç´°è¡Œç¨‹èˆ‡åº§æ¨™å°èˆªè³‡æ–™ ---
        const tripData = {
            1: {
                title: "9/27(å…­) å‡ºç™¼æ—¥",
                items: [
                    { type: 'itinerary', name: "å°ç£æ¡ƒåœ’æ©Ÿå ´", desc: "æ­æ©Ÿå‰å¾€å†°å³¶ [cite: 40-42]" }
                ]
            },
            2: {
                title: "9/28(æ—¥) é›·å…‹é›…ç¶­å…‹",
                items: [
                    { type: 'hotel', name: "SkÃ³lavÃ¶rÃ°ustÃ­gur Apartments", desc: "åœ°å€ï¼šSkÃ³lavÃ¶rÃ°ustÃ­gur 21A, 101 ReykjavÃ­k [cite: 52]" },
                    { type: 'itinerary', name: "HallgrÃ­mskirkja å“ˆçˆ¾æ ¼æ—å§†æ•™å ‚", desc: "è§€è³æ•™å ‚å¤œæ™¯ [cite: 64]" },
                    { type: 'food', name: "Old Iceland", desc: "æ¨è–¦ï¼šIcelandic Lamb Soup ç¾Šè‚‰æ¹¯ [cite: 58-59]" }
                ]
            },
            3: {
                title: "9/29(ä¸€) å‰é€²æ–¯å¥ˆå±±",
                items: [
                    { type: 'hotel', name: "StÃ¶Ã° Guesthouse", desc: "13 SÃ³lvellir, 350 GrundarfjÃ¶rÃ°ur [cite: 70]" },
                    { type: 'itinerary', name: "å½©è™¹è¡— (Rainbow Street)", desc: "å¸‚å€æ¼«éŠæ‹ç…§ [cite: 63]" }
                ]
            },
            4: {
                title: "9/30(äºŒ) æ–¯å¥ˆå±±ç¶“å…¸",
                items: [
                    { type: 'itinerary', name: "Kirkjufell æ•™å ‚å±±", desc: "ç¶“å…¸æ”å½±é» [cite: 87]" },
                    { type: 'food', name: "BÃ¦jarins Beztu Pylsur", desc: "è‘—åçš„å†°å³¶ç†±ç‹—æ”¤ [cite: 81]" },
                    { type: 'food', name: "Messinn ReykjavÃ­k", desc: "æ¨è–¦é®®é­šæ–™ç† [cite: 83]" }
                ]
            },
            5: { title: "10/1(ä¸‰) è¥¿éƒ¨æ™¯é»", items: [{ type: 'itinerary', name: "Hraunfossar ç†”å²©ç€‘å¸ƒ", desc: "[cite: 95]" }, { type: 'hotel', name: "SiglÃ³ HÃ³tel", desc: "[cite: 98]" }] },
            6: { title: "10/2(å››) åŒ—éƒ¨ç·š", items: [{ type: 'itinerary', name: "GoÃ°afoss çœ¾ç¥ç€‘å¸ƒ", desc: "[cite: 104]" }, { type: 'itinerary', name: "MÃ½vatn Nature Baths ç±³æ¹–æº«æ³‰", desc: "[cite: 108]" }] },
            7: { title: "10/3(äº”) æ±éƒ¨å³½ç£", items: [{ type: 'itinerary', name: "SeyÃ°isfjÃ¶rÃ°ur ç™½æ—¥å¤¢å†’éšªç‹å°é®", desc: "[cite: 119]" }, { type: 'food', name: "Kaffi LÃ¡ra El Grillo Bar", desc: "[cite: 121]" }] },
            8: { title: "10/4(å…­) å†°å·æº–å‚™", items: [{ type: 'hotel', name: "SkyrhÃºsid Guesthouse", desc: "[cite: 126]" }] },
            9: { title: "10/5(æ—¥) è—å†°æ´æ¢éšª", items: [{ type: 'itinerary', name: "Blue Ice Cave Adventure", desc: "09:00 å‡ºç™¼ [cite: 129-130]" }] },
            10: { title: "10/6(ä¸€) å†°æ²³æ¹–", items: [{ type: 'itinerary', name: "JÃ¶kulsÃ¡rlÃ³n å‚‘å¤æ²™é¾å†°æ²³æ¹–", desc: "[cite: 134]" }, { type: 'itinerary', name: "Diamond Beach é‘½çŸ³æ²™ç˜", desc: "[cite: 135]" }] },
            11: { title: "10/7(äºŒ) å—å²¸ç€‘å¸ƒ", items: [{ type: 'itinerary', name: "Reynisfjara é»‘æ²™ç˜", desc: "[cite: 144]" }, { type: 'food', name: "Mia's Country Van", desc: "ç‚¸é­šè–¯æ¢ [cite: 146]" }] },
            12: { title: "10/8(ä¸‰) é»ƒé‡‘åœˆ", items: [{ type: 'itinerary', name: "Gullfoss é»ƒé‡‘ç€‘å¸ƒ", desc: "[cite: 155]" }, { type: 'itinerary', name: "Strokkur é–“æ­‡æ³‰", desc: "[cite: 154]" }] },
            13: { title: "10/9(å››) é‚„è»Šæ—¥", items: [{ type: 'itinerary', name: "Sky Lagoon", desc: "11:00 æ³¡æ¹¯ [cite: 160]" }, { type: 'itinerary', name: "LOTUS Car Rentalé‚„è»Š", desc: "20:00 å‰é‚„è»Š [cite: 162]" }] }
        };

        // --- æ ¸å¿ƒé‚è¼¯ ---
        function navTo(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            window.scrollTo(0,0);
        }

        function renderDay(d) {
            const container = document.getElementById('cards-container');
            container.innerHTML = `<h2 style="margin:10px 0;">Day ${d} - ${tripData[d].title}</h2>`;
            
            tripData[d].items.forEach(item => {
                const card = document.createElement('div');
                card.className = `card type-${item.type}`;
                card.innerHTML = `
                    <span class="card-type label-${item.type}">${item.type}</span>
                    <h3>${item.name}</h3>
                    <p style="font-size:14px; color:#555;">${item.desc}</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.name)}" target="_blank" class="btn-nav">
                        <span>ğŸ“</span> å°èˆªå‰å¾€åœ°é»
                    </a>
                `;
                container.appendChild(card);
            });

            document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
            event?.target.classList.add('active');
        }

        function openModal(is, en) {
            const m = document.getElementById('modal');
            document.getElementById('modal-txt').innerText = is + "\n\n" + en;
            m.style.display = 'flex';
        }

        // åˆå§‹åŒ–
        window.onload = () => {
            const bar = document.getElementById('day-bar');
            for(let i=1; i<=13; i++){
                const b = document.createElement('button');
                b.className = 'day-btn';
                b.innerText = `D${i}`;
                b.onclick = () => renderDay(i);
                bar.appendChild(b);
            }
            renderDay(2); // é è¨­é¡¯ç¤ºç¬¬2å¤©å–è»Š
        };

        // ç°¡æ˜“è¨˜å¸³åŠŸèƒ½
        function addExp() {
            const n = document.getElementById('exp-name').value;
            const v = document.getElementById('exp-val').value;
            if(!n || !v) return;
            const list = document.getElementById('exp-list');
            list.innerHTML += `<div>${n}: ${v} ISK</div>`;
            document.getElementById('exp-name').value = "";
            document.getElementById('exp-val').value = "";
        }
    </script>
</body>
</html>
