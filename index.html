<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å†°å³¶ãƒ»è·è˜­éš¨èº«åŠ©ç† 2026</title>
    <style>
        /* --- æ ¸å¿ƒæ¨£å¼èˆ‡å°èˆª --- */
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --danger: #e74c3c;
            --safe: #2ecc71;
            --bg: #f4f7f6;
            --text: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 0 0 70px 0; /* ç‚ºåº•éƒ¨å°èˆªç•™ç™½ */
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }

        .page { display: none; padding: 15px; }
        .page.active { display: block; }

        /* åº•éƒ¨å›ºå®šå°èˆª */
        nav.bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 60px;
            background: #fff;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-item {
            text-align: center;
            font-size: 12px;
            color: #7f8c8d;
            text-decoration: none;
            flex: 1;
        }

        .nav-item.active { color: var(--accent); font-weight: bold; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 2px; }

        /* --- å„€è¡¨æ¿æ¨£å¼ --- */
        .card {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .weather-box { display: flex; align-items: center; justify-content: space-between; }
        .weather-temp { font-size: 32px; font-weight: bold; }
        .alert-box { border: 2px solid var(--danger); background: #fff5f5; border-radius: 8px; padding: 10px; color: var(--danger); font-weight: bold; }

        /* --- è¡Œç¨‹è¡¨æ¨£å¼ --- */
        .itinerary-day { border-left: 4px solid var(--accent); padding-left: 15px; margin-bottom: 25px; }
        .btn-maps { background: var(--accent); color: white; border: none; padding: 8px 12px; border-radius: 5px; text-decoration: none; display: inline-block; margin-top: 5px; font-size: 14px; }
        .abc-options { display: flex; gap: 5px; margin-top: 10px; }
        .abc-btn { flex: 1; padding: 5px; font-size: 12px; border: 1px solid #ddd; border-radius: 4px; text-align: center; background: #eee; }

        /* --- æºé€šæ¨¡çµ„æ¨£å¼ --- */
        details { background: #fff; margin-bottom: 10px; border-radius: 8px; overflow: hidden; }
        summary { padding: 12px; font-weight: bold; list-style: none; cursor: pointer; border-bottom: 1px solid #eee; }
        .phrase-item { padding: 12px; border-bottom: 1px solid #f9f9f9; cursor: pointer; }
        .phrase-item:active { background: #f0f0f0; }

        /* å…¨è¢å¹•æ¨¡å¼ (Focus Mode) */
        #focus-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #fff;
            z-index: 2000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        #focus-text { font-size: 48px; font-weight: bold; width: 100%; word-wrap: break-word; }
        .close-focus { position: absolute; top: 20px; right: 20px; font-size: 30px; color: #666; }

        /* --- å·¥å…·æ¨£å¼ --- */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { text-align: left; padding: 8px; border-bottom: 1px solid #ddd; }
        .input-group { display: flex; gap: 5px; margin-bottom: 10px; }
        input[type="text"], input[type="number"] { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        .btn-add { background: var(--safe); color: white; border: none; padding: 8px 15px; border-radius: 4px; }
    </style>
</head>
<body>

    <div id="focus-modal" onclick="closeFocus()">
        <span class="close-focus">Ã—</span>
        <div id="focus-text"></div>
        <p style="color: #888; margin-top: 20px;">(é»æ“Šç•«é¢é—œé–‰)</p>
    </div>

    <div id="page-home" class="page active">
        <h2 id="current-date">2026 / 09 / 27</h2>
        <div class="alert-box">
            âš ï¸ é‡è¦æé†’ï¼šä»Šæ—¥ Lotus ç§Ÿè»Šå–è»Šï¼Œå¯†ç¢¼åˆ¶è‡ªåŠ©è¾¦ç†ï¼[cite: 46, 49]
        </div>
        
        <div class="card weather-card">
            <h3>ğŸ“ ç•¶å‰å¤©æ°£ (å®šä½ä¸­...)</h3>
            <div class="weather-box">
                <div>
                    <span id="weather-icon" style="font-size: 40px;">â˜€ï¸</span>
                    <span id="weather-desc">Loading...</span>
                </div>
                <div class="weather-temp" id="weather-temp">--Â°C</div>
            </div>
            <p id="weather-fallback" style="font-size: 11px; color: #999; margin-top:10px;"></p>
        </div>

        <div class="card">
            <h3>ğŸš€ å¿«é€Ÿé€£çµ</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <a href="tel:112" class="btn-maps" style="background:#c0392b; text-align:center;">ğŸ“ æ’¥æ‰“ 112 (ç·Šæ€¥) [cite: 36]</a>
                <a href="https://www.lotuscarrental.is/" class="btn-maps" style="background:#f39c12; text-align:center;">ğŸš— Lotus å®˜ç¶² [cite: 47]</a>
            </div>
        </div>
    </div>

    <div id="page-itinerary" class="page">
        <h2>å†°å³¶ 17 æ—¥è¡Œç¨‹ [cite: 38]</h2>
        
        <div class="itinerary-day">
            <h4>Day 2 | 9/28 æŠµé” & å–è»Š [cite: 44]</h4>
            <p>ğŸ“ SkÃ³lavÃ¶rÃ°ustÃ­gur Apartments [cite: 51]<br>
               ğŸ“ +354 787 4444 (Lotus) [cite: 48]</p>
            <div class="alert-box" style="margin: 5px 0;">ğŸ”´ å–æ¶ˆæˆªæ­¢æ—¥ï¼š9/22 [cite: 55]</div>
            <a href="https://www.google.com/maps/search/?api=1&query=SkÃ³lavÃ¶rÃ°ustÃ­gur+21A+ReykjavÃ­k" class="btn-maps">é–‹å•Ÿåœ°åœ–å°èˆª </a>
            <div class="abc-options">
                <div class="abc-btn" style="border-color:gold">A. Old Iceland ç¾Šè‚‰æ¹¯ [cite: 58]</div>
                <div class="abc-btn">B. æ¨“ä¸‹æ³°å¼é¤å»³ [cite: 54]</div>
                <div class="abc-btn">C. å°è±¬è¶…å¸‚è²·å›å…¬å¯“ [cite: 65]</div>
            </div>
        </div>

        <div class="itinerary-day">
            <h4>Day 11 | 10/7 å—å²¸ç€‘å¸ƒ [cite: 142]</h4>
            <p>ğŸ“ Vik é»‘æ²™ç˜ã€SkÃ³gafossã€Seljalandsfoss [cite: 144, 146, 147]</p>
            <div class="abc-options">
                <div class="abc-btn" style="border-color:gold">A. StrÃ¶ndin é­šæ¹¯ [cite: 144]</div>
                <div class="abc-btn">B. Mia's Fish & Chips [cite: 146]</div>
                <div class="abc-btn">C. Tommi's Burger [cite: 150]</div>
            </div>
            <a href="https://www.google.com/maps/search/?api=1&query=Seljalandsfoss" class="btn-maps">å°èˆªè‡³å¡é‡Œé›…è˜­ç€‘å¸ƒ </a>
        </div>
    </div>

    <div id="page-comm" class="page">
        <h2>æºé€šè¼”åŠ© (é»æ“Šæ–‡å­—å…¨è¢å¹•) [cite: 13, 15]</h2>
        
        <details>
            <summary>ğŸš— ç§Ÿè»Šèˆ‡äº¤é€š (Rent a Car)</summary>
            <div class="phrase-item" onclick="showFocus('I have a reservation. / Ã‰g Ã¡ pÃ¶ntun. / Ik heb een reservering.')">
                <b>EN:</b> I have a reservation.<br><b>IS:</b> Ã‰g Ã¡ pÃ¶ntun.<br><b>NL:</b> Ik heb een reservering.
            </div>
            <div class="phrase-item" onclick="showFocus('Full insurance, please. / Fulla tryggingu, takk. / Volledige verzekering, aub.')">
                <b>IS:</b> Fulla tryggingu, takk. (å…¨éšª)
            </div>
        </details>

        <details>
            <summary>ğŸ´ é¤å»³èˆ‡é£²é£Ÿ (Dining)</summary>
            <div class="phrase-item" onclick="showFocus('A table for two. / BorÃ° fyrir tvo. / Een tafel voor twee.')">
                <b>EN:</b> Table for two.<br><b>IS:</b> BorÃ° fyrir tvo.
            </div>
            <div class="phrase-item" onclick="showFocus('The bill, please. / Reikninginn, takk. / De rekening, alstublieft.')">
                <b>IS:</b> Reikninginn, takk. (çµå¸³)
            </div>
        </details>

        <details>
            <summary>ğŸš‘ ç·Šæ€¥ç‹€æ³ (Emergency)</summary>
            <div class="phrase-item" onclick="showFocus('I need help! / Ã‰g Ã¾arf hjÃ¡lp! / Ik heb hulp nodig!')">
                <b>IS:</b> Ã‰g Ã¾arf hjÃ¡lp! (æ•‘å‘½)
            </div>
        </details>
    </div>

    <div id="page-tools" class="page">
        <h3>ğŸ’° æ—…éŠè¨˜å¸³ [cite: 28]</h3>
        <div class="input-group">
            <input type="text" id="exp-name" placeholder="é …ç›® (å¦‚: æ™šé¤)">
            <input type="number" id="exp-amount" placeholder="é‡‘é¡">
            <button class="btn-add" onclick="addExpense()">+</button>
        </div>
        <table>
            <thead><tr><th>é …ç›®</th><th>é‡‘é¡</th><th>æ“ä½œ</th></tr></thead>
            <tbody id="exp-list"></tbody>
            <tfoot><tr><td><b>ç¸½è¨ˆ</b></td><td id="exp-total">0</td><td><button onclick="clearExpenses()" style="font-size:10px">æ¸…ç©º</button></td></tr></tfoot>
        </table>

        <hr>

        <h3>ğŸ“¦ è¡Œææª¢æŸ¥ [cite: 32]</h3>
        <div id="checklist-container">
            <div><input type="checkbox" onchange="saveCheck(0)" class="chk-item"> è­·ç…§èˆ‡åœ‹éš›é§•ç…§ [cite: 33]</div>
            <div><input type="checkbox" onchange="saveCheck(1)" class="chk-item"> é˜²æ°´å¤–å¥—èˆ‡é•·è¤² (å†°å³¶å¿…å‚™)</div>
            <div><input type="checkbox" onchange="saveCheck(2)" class="chk-item"> ç§Ÿè»Šç¢ºèªå–®èˆ‡ä¿éšªè­‰æ˜</div>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="javascript:void(0)" class="nav-item active" onclick="switchPage('home', this)"><i>ğŸ </i>è³‡è¨Š</a>
        <a href="javascript:void(0)" class="nav-item" onclick="switchPage('itinerary', this)"><i>ğŸ“…</i>è¡Œç¨‹</a>
        <a href="javascript:void(0)" class="nav-item" onclick="switchPage('comm', this)"><i>ğŸ—£ï¸</i>æºé€š</a>
        <a href="javascript:void(0)" class="nav-item" onclick="switchPage('tools', this)"><i>ğŸ› ï¸</i>å·¥å…·</a>
    </nav>

    <script>
        // --- SPA åˆ‡æ›é‚è¼¯ ---
        function switchPage(pageId, element) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            element.classList.add('active');
            
            window.scrollTo(0, 0); // åˆ‡æ›å¾Œå›åˆ°é ‚éƒ¨ [cite: 7]
        }

        // --- å¤©æ°£ API èˆ‡å®šä½ [cite: 9, 10] ---
        function updateWeather() {
            const fallbackCity = "Reykjavik";
            const apiKey = "YOUR_API_KEY"; // å¯¦éš›ä½¿ç”¨éœ€ç”³è«‹ OpenWeatherMap API

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => fetchWeather(pos.coords.latitude, pos.coords.longitude, "ç•¶å‰ä½ç½®"),
                    () => fetchWeather(64.1265, -21.8174, "é›·å…‹é›…ç¶­å…‹ (é è¨­)")
                );
            }
        }

        async function fetchWeather(lat, lon, label) {
            document.getElementById('weather-fallback').innerText = "ä¾†æº: " + label;
            // é€™è£¡æ¨¡æ“¬ API å›å‚³ï¼Œå¯¦å‹™ä¸Šæœƒä½¿ç”¨ fetch()
            setTimeout(() => {
                document.getElementById('weather-temp').innerText = "8Â°C";
                document.getElementById('weather-desc').innerText = "å¤šé›²æ™‚æ™´";
                document.getElementById('weather-icon').innerText = "â›…";
            }, 1000);
        }

        // --- æºé€šå…¨è¢å¹•æ¨¡å¼ [cite: 15, 16] ---
        function showFocus(text) {
            document.getElementById('focus-text').innerText = text;
            document.getElementById('focus-modal').style.display = 'flex';
        }
        function closeFocus() {
            document.getElementById('focus-modal').style.display = 'none';
        }

        // --- è¨˜å¸³åŠŸèƒ½ (LocalStorage) [cite: 30, 31] ---
        let expenses = JSON.parse(localStorage.getItem('travel_exp')) || [];

        function renderExpenses() {
            const list = document.getElementById('exp-list');
            list.innerHTML = '';
            let total = 0;
            expenses.forEach((item, index) => {
                total += item.amount;
                list.innerHTML += `<tr><td>${item.name}</td><td>${item.amount}</td><td onclick="removeExp(${index})">âŒ</td></tr>`;
            });
            document.getElementById('exp-total').innerText = total;
            localStorage.setItem('travel_exp', JSON.stringify(expenses));
        }

        function addExpense() {
            const name = document.getElementById('exp-name').value;
            const amount = parseFloat(document.getElementById('exp-amount').value);
            if(name && amount) {
                expenses.push({name, amount});
                renderExpenses();
                document.getElementById('exp-name').value = '';
                document.getElementById('exp-amount').value = '';
            }
        }

        function removeExp(index) {
            expenses.splice(index, 1);
            renderExpenses();
        }

        function clearExpenses() {
            if(confirm('ç¢ºå®šæ¸…é™¤æ‰€æœ‰å¸³ç›®ï¼Ÿ')) { expenses = []; renderExpenses(); }
        }

        // --- è¡Œææ¸…å–®æŒä¹…åŒ– [cite: 34] ---
        function saveCheck(index) {
            const checks = Array.from(document.querySelectorAll('.chk-item')).map(c => c.checked);
            localStorage.setItem('travel_checks', JSON.stringify(checks));
        }

        function loadCheck() {
            const saved = JSON.parse(localStorage.getItem('travel_checks'));
            if(saved) {
                const boxes = document.querySelectorAll('.chk-item');
                saved.forEach((val, i) => { if(boxes[i]) boxes[i].checked = val; });
            }
        }

        // åˆå§‹åŒ–
        window.onload = () => {
            updateWeather();
            renderExpenses();
            loadCheck();
        };
    </script>
</body>
</html>
